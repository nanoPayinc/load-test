'use strict'

var app     = require('../../../server/app');
var SAS = [
  "4310000000000130",
  "4310000000000148",
  "4310000000000155",
  "4310000000000163",
  "4310000000000171",
  "4310000000000189",
  "4310000000000197",
  "4310000000000205",
  "4310000000000213",
  "4310000000000221",
  "4310000000000239",
  "4310000000000247",
  "4310000000000254",
  "4310000000000262",
  "4310000000000270",
  "4310000000000288",
  "4310000000000296",
  "4310000000000304",
  "4310000000000312",
  "4310000000000320",
  "4310000000000338",
  "4310000000000346",
  "4310000000000353",
  "4310000000000361",
  "4310000000000379",
  "4310000000000387",
  "4310000000000395",
  "4310000000000403",
  "4310000000000411",
  "4310000000000429",
  "4310000000000437",
  "4310000000000445",
  "4310000000000452",
  "4310000000000460",
  "4310000000000478",
  "4310000000000486",
  "4310000000000494",
  "4310000000000502",
  "4310000000000510",
  "4310000000000528",
  "4310000000000536",
  "4310000000000544",
  "4310000000000551",
  "4310000000000569",
  "4310000000000577",
  "4310000000000585",
  "4310000000000593",
  "4310000000000601",
  "4310000000000619",
  "4310000000000627",
  "4310000000000635",
  "4310000000000643",
  "4310000000000650",
  "4310000000000668",
  "4310000000000676",
  "4310000000000684",
  "4310000000000692",
  "4310000000000700",
  "4310000000000718",
  "4310000000000726",
  "4310000000000734",
  "4310000000000742",
  "4310000000000759",
  "4310000000000767",
  "4310000000000775",
  "4310000000000783",
  "4310000000000791",
  "4310000000000809",
  "4310000000000817",
  "4310000000000825",
  "4310000000000833",
  "4310000000000841",
  "4310000000000858",
  "4310000000000866",
  "4310000000000874",
  "4310000000000882",
  "4310000000000890",
  "4310000000000908",
  "4310000000000916",
  "4310000000000924",
  "4310000000000932",
  "4310000000000940",
  "4310000000000957",
  "4310000000000965",
  "4310000000000973",
  "4310000000000981",
  "4310000000000999",
  "4310000000001005",
  "4310000000001013",
  "4310000000001021",
  "4310000000001039",
  "4310000000001047",
  "4310000000001054",
  "4310000000001062",
  "4310000000001070",
  "4310000000001088",
  "4310000000001096",
  "4310000000001104",
  "4310000000001112",
  "4310000000001120",
  "4310000000001138",
  "4310000000001146",
  "4310000000001153",
  "4310000000001161",
  "4310000000001179",
  "4310000000001187",
  "4310000000001195",
  "4310000000001203",
  "4310000000001211",
  "4310000000001229",
  "4310000000001237",
  "4310000000001245",
  "4310000000001252",
  "4310000000001260",
  "4310000000001278",
  "4310000000001286",
  "4310000000001294",
  "4310000000001302",
  "4310000000001310",
  "4310000000001328",
  "4310000000001336",
  "4310000000001344",
  "4310000000001351",
  "4310000000001369",
  "4310000000001377",
  "4310000000001385",
  "4310000000001393",
  "4310000000001401",
  "4310000000001419",
  "4310000000001427",
  "4310000000001435",
  "4310000000001443",
  "4310000000001450",
  "4310000000001468",
  "4310000000001476",
  "4310000000001484",
  "4310000000001492",
  "4310000000001500",
  "4310000000001518",
  "4310000000001526",
  "4310000000001534",
  "4310000000001542",
  "4310000000001559",
  "4310000000001567",
  "4310000000001575",
  "4310000000001583",
  "4310000000001591",
  "4310000000001609",
  "4310000000001617",
  "4310000000001625",
  "4310000000001633",
  "4310000000001641",
  "4310000000001658",
  "4310000000001666",
  "4310000000001674",
  "4310000000001682",
  "4310000000001690",
  "4310000000001708",
  "4310000000001716",
  "4310000000001724",
  "4310000000001732",
  "4310000000001740",
  "4310000000001757",
  "4310000000001765",
  "4310000000001773",
  "4310000000001781",
  "4310000000001799",
  "4310000000001807",
  "4310000000001815",
  "4310000000001823",
  "4310000000001831",
  "4310000000001849",
  "4310000000001856",
  "4310000000001864",
  "4310000000001872",
  "4310000000001880",
  "4310000000001898",
  "4310000000001906",
  "4310000000001914",
  "4310000000001922",
  "4310000000001930",
  "4310000000001948",
  "4310000000001955",
  "4310000000001963",
  "4310000000001971",
  "4310000000001989",
  "4310000000001997",
  "4310000000002003",
  "4310000000002011",
  "4310000000002029",
  "4310000000002037",
  "4310000000002045",
  "4310000000002052",
  "4310000000002060",
  "4310000000002078",
  "4310000000002086",
  "4310000000002094",
  "4310000000002102",
  "4310000000002110",
  "4310000000002128",
  "4310000000002136",
  "4310000000002144",
  "4310000000002151",
  "4310000000002169",
  "4310000000002177",
  "4310000000002185",
  "4310000000002193",
  "4310000000002201",
  "4310000000002219",
  "4310000000002227",
  "4310000000002235",
  "4310000000002243",
  "4310000000002250",
  "4310000000002268",
  "4310000000002276",
  "4310000000002284",
  "4310000000002292",
  "4310000000002300",
  "4310000000002318",
  "4310000000002326",
  "4310000000002334",
  "4310000000002342",
  "4310000000002359",
  "4310000000002367",
  "4310000000002375",
  "4310000000002383",
  "4310000000002391",
  "4310000000002409",
  "4310000000002417",
  "4310000000002425",
  "4310000000002433",
  "4310000000002441",
  "4310000000002458",
  "4310000000002466",
  "4310000000002474",
  "4310000000002482",
  "4310000000002490",
  "4310000000002508",
  "4310000000002516",
  "4310000000002524",
  "4310000000002532",
  "4310000000002540",
  "4310000000002557",
  "4310000000002565",
  "4310000000002573",
  "4310000000002581",
  "4310000000002599",
  "4310000000002607",
  "4310000000002615",
  "4310000000002623",
  "4310000000002631",
  "4310000000002649",
  "4310000000002656",
  "4310000000002664",
  "4310000000002672",
  "4310000000002680",
  "4310000000002698",
  "4310000000002706",
  "4310000000002714",
  "4310000000002722",
  "4310000000002730",
  "4310000000002748",
  "4310000000002755",
  "4310000000002763",
  "4310000000002771",
  "4310000000002789",
  "4310000000002797",
  "4310000000002805",
  "4310000000002813",
  "4310000000002821",
  "4310000000002839",
  "4310000000002847",
  "4310000000002854",
  "4310000000002862",
  "4310000000002870",
  "4310000000002888",
  "4310000000002896",
  "4310000000002904",
  "4310000000002912",
  "4310000000002920",
  "4310000000002938",
  "4310000000002946",
  "4310000000002953",
  "4310000000002961",
  "4310000000002979",
  "4310000000002987",
  "4310000000002995",
  "4310000000003001",
  "4310000000003019",
  "4310000000003027",
  "4310000000003035",
  "4310000000003043",
  "4310000000003050",
  "4310000000003068",
  "4310000000003076",
  "4310000000003084",
  "4310000000003092",
  "4310000000003100",
  "4310000000003118",
  "4310000000003126",
  "4310000000003134",
  "4310000000003142",
  "4310000000003159",
  "4310000000003167",
  "4310000000003175",
  "4310000000003183",
  "4310000000003191",
  "4310000000003209",
  "4310000000003217",
  "4310000000003225",
  "4310000000003233",
  "4310000000003241",
  "4310000000003258",
  "4310000000003266",
  "4310000000003274",
  "4310000000003282",
  "4310000000003290",
  "4310000000003308",
  "4310000000003316",
  "4310000000003324",
  "4310000000003332",
  "4310000000003340",
  "4310000000003357",
  "4310000000003365",
  "4310000000003373",
  "4310000000003381",
  "4310000000003399",
  "4310000000003407",
  "4310000000003415",
  "4310000000003423",
  "4310000000003431",
  "4310000000003449",
  "4310000000003456",
  "4310000000003464",
  "4310000000003472",
  "4310000000003480",
  "4310000000003498",
  "4310000000003506",
  "4310000000003514",
  "4310000000003522",
  "4310000000003530",
  "4310000000003548",
  "4310000000003555",
  "4310000000003563",
  "4310000000003571",
  "4310000000003589",
  "4310000000003597",
  "4310000000003605",
  "4310000000003613",
  "4310000000003621",
  "4310000000003639",
  "4310000000003647",
  "4310000000003654",
  "4310000000003662",
  "4310000000003670",
  "4310000000003688",
  "4310000000003696",
  "4310000000003704",
  "4310000000003712",
  "4310000000003720",
  "4310000000003738",
  "4310000000003746",
  "4310000000003753",
  "4310000000003761",
  "4310000000003779",
  "4310000000003787",
  "4310000000003795",
  "4310000000003803",
  "4310000000003811",
  "4310000000003829",
  "4310000000003837",
  "4310000000003845",
  "4310000000003852",
  "4310000000003860",
  "4310000000003878",
  "4310000000003886",
  "4310000000003894",
  "4310000000003902",
  "4310000000003910",
  "4310000000003928",
  "4310000000003936",
  "4310000000003944",
  "4310000000003951",
  "4310000000003969",
  "4310000000003977",
  "4310000000003985",
  "4310000000003993",
  "4310000000004009",
  "4310000000004017",
  "4310000000004025",
  "4310000000004033",
  "4310000000004041",
  "4310000000004058",
  "4310000000004066",
  "4310000000004074",
  "4310000000004082",
  "4310000000004090",
  "4310000000004108",
  "4310000000004116",
  "4310000000004124",
  "4310000000004132",
  "4310000000004140",
  "4310000000004157",
  "4310000000004165",
  "4310000000004173",
  "4310000000004181",
  "4310000000004199",
  "4310000000004207",
  "4310000000004215",
  "4310000000004223",
  "4310000000004231",
  "4310000000004249",
  "4310000000004256",
  "4310000000004264",
  "4310000000004272",
  "4310000000004280",
  "4310000000004298",
  "4310000000004306",
  "4310000000004314",
  "4310000000004322",
  "4310000000004330",
  "4310000000004348",
  "4310000000004355",
  "4310000000004363",
  "4310000000004371",
  "4310000000004389",
  "4310000000004397",
  "4310000000004405",
  "4310000000004413",
  "4310000000004421",
  "4310000000004439",
  "4310000000004447",
  "4310000000004454",
  "4310000000004462",
  "4310000000004470",
  "4310000000004488",
  "4310000000004496",
  "4310000000004504",
  "4310000000004512",
  "4310000000004520",
  "4310000000004538",
  "4310000000004546",
  "4310000000004553",
  "4310000000004561",
  "4310000000004579",
  "4310000000004587",
  "4310000000004595",
  "4310000000004603",
  "4310000000004611",
  "4310000000004629",
  "4310000000004637",
  "4310000000004645",
  "4310000000004652",
  "4310000000004660",
  "4310000000004678",
  "4310000000004686",
  "4310000000004694",
  "4310000000004702",
  "4310000000004710",
  "4310000000004728",
  "4310000000004736",
  "4310000000004744",
  "4310000000004751",
  "4310000000004769",
  "4310000000004777",
  "4310000000004785",
  "4310000000004793",
  "4310000000004801",
  "4310000000004819",
  "4310000000004827",
  "4310000000004835",
  "4310000000004843",
  "4310000000004850",
  "4310000000004868",
  "4310000000004876",
  "4310000000004884",
  "4310000000004892",
  "4310000000004900",
  "4310000000004918",
  "4310000000004926",
  "4310000000004934",
  "4310000000004942",
  "4310000000004959",
  "4310000000004967",
  "4310000000004975",
  "4310000000004983",
  "4310000000004991",
  "4310000000005006",
  "4310000000005014",
  "4310000000005022",
  "4310000000005030",
  "4310000000005048",
  "4310000000005055",
  "4310000000005063",
  "4310000000005071",
  "4310000000005089",
  "4310000000005097",
  "4310000000005105",
  "4310000000005113",
  "4310000000005121",
  "4310000000005139",
  "4310000000005147",
  "4310000000005154",
  "4310000000005162",
  "4310000000005170",
  "4310000000005188",
  "4310000000005196",
  "4310000000005204",
  "4310000000005212",
  "4310000000005220",
  "4310000000005238",
  "4310000000005246",
  "4310000000005253",
  "4310000000005261",
  "4310000000005279",
  "4310000000005287",
  "4310000000005295",
  "4310000000005303",
  "4310000000005311",
  "4310000000005329",
  "4310000000005337",
  "4310000000005345",
  "4310000000005352",
  "4310000000005360",
  "4310000000005378",
  "4310000000005386",
  "4310000000005394",
  "4310000000005402",
  "4310000000005410",
  "4310000000005428",
  "4310000000005436",
  "4310000000005444",
  "4310000000005451",
  "4310000000005469",
  "4310000000005477",
  "4310000000005485",
  "4310000000005493",
  "4310000000005501",
  "4310000000005519",
  "4310000000005527",
  "4310000000005535",
  "4310000000005543",
  "4310000000005550",
  "4310000000005568",
  "4310000000005576",
  "4310000000005584",
  "4310000000005592",
  "4310000000005600",
  "4310000000005618",
  "4310000000005626",
  "4310000000005634",
  "4310000000005642",
  "4310000000005659",
  "4310000000005667",
  "4310000000005675",
  "4310000000005683",
  "4310000000005691",
  "4310000000005709",
  "4310000000005717",
  "4310000000005725",
  "4310000000005733",
  "4310000000005741",
  "4310000000005758",
  "4310000000005766",
  "4310000000005774",
  "4310000000005782",
  "4310000000005790",
  "4310000000005808",
  "4310000000005816",
  "4310000000005824",
  "4310000000005832",
  "4310000000005840",
  "4310000000005857",
  "4310000000005865",
  "4310000000005873",
  "4310000000005881",
  "4310000000005899",
  "4310000000005907",
  "4310000000005915",
  "4310000000005923",
  "4310000000005931",
  "4310000000005949",
  "4310000000005956",
  "4310000000005964",
  "4310000000005972",
  "4310000000005980",
  "4310000000005998",
  "4310000000006004",
  "4310000000006012",
  "4310000000006020",
  "4310000000006038",
  "4310000000006046",
  "4310000000006053",
  "4310000000006061",
  "4310000000006079",
  "4310000000006087",
  "4310000000006095",
  "4310000000006103",
  "4310000000006111",
  "4310000000006129",
  "4310000000006137",
  "4310000000006145",
  "4310000000006152",
  "4310000000006160",
  "4310000000006178",
  "4310000000006186",
  "4310000000006194",
  "4310000000006202",
  "4310000000006210",
  "4310000000006228",
  "4310000000006236",
  "4310000000006244",
  "4310000000006251",
  "4310000000006269",
  "4310000000006277",
  "4310000000006285",
  "4310000000006293",
  "4310000000006301",
  "4310000000006319",
  "4310000000006327",
  "4310000000006335",
  "4310000000006343",
  "4310000000006350",
  "4310000000006368",
  "4310000000006376",
  "4310000000006384",
  "4310000000006392",
  "4310000000006400",
  "4310000000006418",
  "4310000000006426",
  "4310000000006434",
  "4310000000006442",
  "4310000000006459",
  "4310000000006467",
  "4310000000006475",
  "4310000000006483",
  "4310000000006491",
  "4310000000006509",
  "4310000000006517",
  "4310000000006525",
  "4310000000006533",
  "4310000000006541",
  "4310000000006558",
  "4310000000006566",
  "4310000000006574",
  "4310000000006582",
  "4310000000006590",
  "4310000000006608",
  "4310000000006616",
  "4310000000006624",
  "4310000000006632",
  "4310000000006640",
  "4310000000006657",
  "4310000000006665",
  "4310000000006673",
  "4310000000006681",
  "4310000000006699",
  "4310000000006707",
  "4310000000006715",
  "4310000000006723",
  "4310000000006731",
  "4310000000006749",
  "4310000000006756",
  "4310000000006764",
  "4310000000006772",
  "4310000000006780",
  "4310000000006798",
  "4310000000006806",
  "4310000000006814",
  "4310000000006822",
  "4310000000006830",
  "4310000000006848",
  "4310000000006855",
  "4310000000006863",
  "4310000000006871",
  "4310000000006889",
  "4310000000006897",
  "4310000000006905",
  "4310000000006913",
  "4310000000006921",
  "4310000000006939",
  "4310000000006947",
  "4310000000006954",
  "4310000000006962",
  "4310000000006970",
  "4310000000006988",
  "4310000000006996",
  "4310000000007002",
  "4310000000007010",
  "4310000000007028",
  "4310000000007036",
  "4310000000007044",
  "4310000000007051",
  "4310000000007069",
  "4310000000007077",
  "4310000000007085",
  "4310000000007093",
  "4310000000007101",
  "4310000000007119",
  "4310000000007127",
  "4310000000007135",
  "4310000000007143",
  "4310000000007150",
  "4310000000007168",
  "4310000000007176",
  "4310000000007184",
  "4310000000007192",
  "4310000000007200",
  "4310000000007218",
  "4310000000007226",
  "4310000000007234",
  "4310000000007242",
  "4310000000007259",
  "4310000000007267",
  "4310000000007275",
  "4310000000007283",
  "4310000000007291",
  "4310000000007309",
  "4310000000007317",
  "4310000000007325",
  "4310000000007333",
  "4310000000007341",
  "4310000000007358",
  "4310000000007366",
  "4310000000007374",
  "4310000000007382",
  "4310000000007390",
  "4310000000007408",
  "4310000000007416",
  "4310000000007424",
  "4310000000007432",
  "4310000000007440",
  "4310000000007457",
  "4310000000007465",
  "4310000000007473",
  "4310000000007481",
  "4310000000007499",
  "4310000000007507",
  "4310000000007515",
  "4310000000007523",
  "4310000000007531",
  "4310000000007549",
  "4310000000007556",
  "4310000000007564",
  "4310000000007572",
  "4310000000007580",
  "4310000000007598",
  "4310000000007606",
  "4310000000007614",
  "4310000000007622",
  "4310000000007630",
  "4310000000007648",
  "4310000000007655",
  "4310000000007663",
  "4310000000007671",
  "4310000000007689",
  "4310000000007697",
  "4310000000007705",
  "4310000000007713",
  "4310000000007721",
  "4310000000007739",
  "4310000000007747",
  "4310000000007754",
  "4310000000007762",
  "4310000000007770",
  "4310000000007788",
  "4310000000007796",
  "4310000000007804",
  "4310000000007812",
  "4310000000007820",
  "4310000000007838",
  "4310000000007846",
  "4310000000007853",
  "4310000000007861",
  "4310000000007879",
  "4310000000007887",
  "4310000000007895",
  "4310000000007903",
  "4310000000007911",
  "4310000000007929",
  "4310000000007937",
  "4310000000007945",
  "4310000000007952",
  "4310000000007960",
  "4310000000007978",
  "4310000000007986",
  "4310000000007994",
  "4310000000008000",
  "4310000000008018",
  "4310000000008026",
  "4310000000008034",
  "4310000000008042",
  "4310000000008059",
  "4310000000008067",
  "4310000000008075",
  "4310000000008083",
  "4310000000008091",
  "4310000000008109",
  "4310000000008117",
  "4310000000008125",
  "4310000000008133",
  "4310000000008141",
  "4310000000008158",
  "4310000000008166",
  "4310000000008174",
  "4310000000008182",
  "4310000000008190",
  "4310000000008208",
  "4310000000008216",
  "4310000000008224",
  "4310000000008232",
  "4310000000008240",
  "4310000000008257",
  "4310000000008265",
  "4310000000008273",
  "4310000000008281",
  "4310000000008299",
  "4310000000008307",
  "4310000000008315",
  "4310000000008323",
  "4310000000008331",
  "4310000000008349",
  "4310000000008356",
  "4310000000008364",
  "4310000000008372",
  "4310000000008380",
  "4310000000008398",
  "4310000000008406",
  "4310000000008414",
  "4310000000008422",
  "4310000000008430",
  "4310000000008448",
  "4310000000008455",
  "4310000000008463",
  "4310000000008471",
  "4310000000008489",
  "4310000000008497",
  "4310000000008505",
  "4310000000008513",
  "4310000000008521",
  "4310000000008539",
  "4310000000008547",
  "4310000000008554",
  "4310000000008562",
  "4310000000008570",
  "4310000000008588",
  "4310000000008596",
  "4310000000008604",
  "4310000000008612",
  "4310000000008620",
  "4310000000008638",
  "4310000000008646",
  "4310000000008653",
  "4310000000008661",
  "4310000000008679",
  "4310000000008687",
  "4310000000008695",
  "4310000000008703",
  "4310000000008711",
  "4310000000008729",
  "4310000000008737",
  "4310000000008745",
  "4310000000008752",
  "4310000000008760",
  "4310000000008778",
  "4310000000008786",
  "4310000000008794",
  "4310000000008802",
  "4310000000008810",
  "4310000000008828",
  "4310000000008836",
  "4310000000008844",
  "4310000000008851",
  "4310000000008869",
  "4310000000008877",
  "4310000000008885",
  "4310000000008893",
  "4310000000008901",
  "4310000000008919",
  "4310000000008927",
  "4310000000008935",
  "4310000000008943",
  "4310000000008950",
  "4310000000008968",
  "4310000000008976",
  "4310000000008984",
  "4310000000008992",
  "4310000000009008",
  "4310000000009016",
  "4310000000009024",
  "4310000000009032",
  "4310000000009040",
  "4310000000009057",
  "4310000000009065",
  "4310000000009073",
  "4310000000009081",
  "4310000000009099",
  "4310000000009107",
  "4310000000009115",
  "4310000000009123",
  "4310000000009131",
  "4310000000009149",
  "4310000000009156",
  "4310000000009164",
  "4310000000009172",
  "4310000000009180",
  "4310000000009198",
  "4310000000009206",
  "4310000000009214",
  "4310000000009222",
  "4310000000009230",
  "4310000000009248",
  "4310000000009255",
  "4310000000009263",
  "4310000000009271",
  "4310000000009289",
  "4310000000009297",
  "4310000000009305",
  "4310000000009313",
  "4310000000009321",
  "4310000000009339",
  "4310000000009347",
  "4310000000009354",
  "4310000000009362",
  "4310000000009370",
  "4310000000009388",
  "4310000000009396",
  "4310000000009404",
  "4310000000009412",
  "4310000000009420",
  "4310000000009438",
  "4310000000009446",
  "4310000000009453",
  "4310000000009461",
  "4310000000009479",
  "4310000000009487",
  "4310000000009495",
  "4310000000009503",
  "4310000000009511",
  "4310000000009529",
  "4310000000009537",
  "4310000000009545",
  "4310000000009552",
  "4310000000009560",
  "4310000000009578",
  "4310000000009586",
  "4310000000009594",
  "4310000000009602",
  "4310000000009610",
  "4310000000009628",
  "4310000000009636",
  "4310000000009644",
  "4310000000009651",
  "4310000000009669",
  "4310000000009677",
  "4310000000009685",
  "4310000000009693",
  "4310000000009701",
  "4310000000009719",
  "4310000000009727",
  "4310000000009735",
  "4310000000009743",
  "4310000000009750",
  "4310000000009768",
  "4310000000009776",
  "4310000000009784",
  "4310000000009792",
  "4310000000009800",
  "4310000000009818",
  "4310000000009826",
  "4310000000009834",
  "4310000000009842",
  "4310000000009859",
  "4310000000009867",
  "4310000000009875",
  "4310000000009883",
  "4310000000009891",
  "4310000000009909",
  "4310000000009917",
  "4310000000009925",
  "4310000000009933",
  "4310000000009941",
  "4310000000009958",
  "4310000000009966",
  "4310000000009974",
  "4310000000009982",
  "4310000000009990",
  "4310000000010006",
  "4310000000010014",
  "4310000000010022",
  "4310000000010030",
  "4310000000010048",
  "4310000000010055",
  "4310000000010063",
  "4310000000010071"
  ]  


module.exports = function(Load) {
  
  function selectRandom() {
    var pool = SAS;
    var payerId = pool[Math.floor(Math.random()*pool.length)];
    // remove payerId from pool so that it isn't selected again
    var payerIdIdx = pool.indexOf(payerId);
    pool.splice(payerIdIdx, 1);
    var payeeId = pool[Math.floor(Math.random()*pool.length)];
    Load.payerId = payerId;
    Load.payeeId = payeeId;
  }
  
  Load.simulateTransaction = function(cb) {
    selectRandom();
    
    console.log('send 1 cent from ' + Load.payerId + ' to ' + Load.payeeId);
    app.dataSources.hsmserver.info(Load.payerId, function(err, info) {
      console.log("PAYER INFO", info);
      app.dataSources.hsmserver.createVtm({
        "payer_id":Load.payerId,
        "payee_id":Load.payeeId,
        "currency_code":1,
        "amount_cents":1,
        "include_cert_in_vtm":1
      }, function(err, vtmResponse) {
        console.log(vtmResponse);
        var vtm = vtmResponse.vtmb64;
        
        app.dataSources.hsmserver.acceptVtm({
          "vtmb64":vtm
        }, function(err, load) {
          console.log("LOAD VTM", load);
          app.dataSources.hsmserver.info(Load.payeeId, function(err, info) {
            console.log("PAYEE INFO", info);
            setTimeout(function() {
              cb(false, 'transaction complete');  
            }, 1000);
          });
        })
        
      })
    })
  
  }
  
  Load.remoteMethod(
    'simulateTransaction',
    {
      produces: ['application/json'],
      returns: {
        type: "object",
        root: true
      },
      accepts: [
        
      ],
      http: { verb: 'post' }
    }
  );
};
